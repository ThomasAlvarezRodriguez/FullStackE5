{% extends 'base.html' %}

{% block title %}{{ jeu.nom }}{% endblock %}

{% block content %}
<div class="breadcrumb">
    <a href="{% url 'home' %}">Accueil</a> > <a href="{% url 'jeux_list' %}">Liste des jeux</a> > {{ jeu.nom }}
</div>
<div class="content">
    <h1>{{ jeu.nom }}</h1>
    <p>{{ jeu.description }}</p>

    <h2>Items</h2>
    <ul>
        {% for item in items %}
            <li>
                {{ item.nom }}
                {% if request.user.is_authenticated %}
                <form method="post" action="{% url 'toggle_obtenu_item' item.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="obtain-button {% if item in profil_utilisateur.items_obtenus.all %}remove-obtain{% endif %}">
                        {% if item in profil_utilisateur.items_obtenus.all %}
                            Retirer des obtenus
                        {% else %}
                            Marquer comme obtenu
                        {% endif %}
                    </button>
                </form>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <h2>QuÃªtes</h2>
    <ul>
        {% for quete in quetes %}
            <li>
                {{ quete.titre }}
                {% if request.user.is_authenticated %}
                <form method="post" action="{% url 'toggle_obtenu_quete' quete.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="obtain-button {% if quete in profil_utilisateur.quetes_obtenues.all %}remove-obtain{% endif %}">
                        {% if quete in profil_utilisateur.quetes_obtenues.all %}
                            Retirer des obtenues
                        {% else %}
                            Marquer comme obtenue
                        {% endif %}
                    </button>
                </form>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
